<?xml version="1.0" encoding="utf-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd">

    <changeSet id="4_23_0_ADD_TABLE_SECURITY_CODE" author="piliotid" context="migrate">
        <comment>Add security_code table.</comment>
        <sql>
            create sequence security_code_seq minvalue 0 maxvalue 999999999999999999 increment by 1 start with 1 cache 1 no cycle;

            create table "security_code"
            ("id" bigint,
             "email" varchar(256),
             "country_code" varchar(10),
             "phone_number" varchar(256),
             "code" varchar(256) not null,
             "valid" boolean,
             "user_id" bigint not null,
             "expired_at" timestamp not null,
             "created_at" timestamp not null,
             constraint "pk_security_code" primary key("id"));

            comment on table "security_code" is 'Stores user security codes.';
			comment on column "security_code"."id" is 'The primary key';
			comment on column "security_code"."email" is 'the related email';
			comment on column "security_code"."country_code" is 'the related phone number code';
			comment on column "security_code"."phone_number" is 'the related phone number';
			comment on column "security_code"."code" is 'The code';
			comment on column "security_code"."valid" is 'If the code is valid';
			comment on column "security_code"."user_id" is 'The user id';
			comment on column "security_code"."expired_at" is 'The date that the code expires';
			comment on column "security_code"."created_at" is 'The date that the code was created';
        </sql>
    </changeSet>
</databaseChangeLog>