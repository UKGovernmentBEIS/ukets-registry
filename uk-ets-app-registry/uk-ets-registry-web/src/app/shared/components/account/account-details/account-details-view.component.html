<div class="govuk-body info" *ngIf="showSalesContactInfo">
  Sales contact details can now be added
</div>
<dl
  *ngIf="isConfirmMode"
  class="govuk-summary-list govuk-summary-list--no-border govuk-!-margin-bottom-0"
>
  <div class="govuk-summary-list__row">
    <dt class="govuk-summary-list__key">
      <span class="govuk-heading-m">Account details</span>
    </dt>
  </div>
</dl>
<dl class="govuk-summary-list govuk-summary-list--no-border">
  <div class="govuk-summary-list__row">
    <dt class="govuk-summary-list__key">Account type</dt>
    <dd class="govuk-summary-list__value">
      {{ AccountTypeMap[accountType].label }}
    </dd>
  </div>
  <div class="govuk-summary-list__row">
    <dt class="govuk-summary-list__key">Account name</dt>
    <dd class="govuk-summary-list__value">
      {{ accountDetails.name }}
    </dd>
  </div>
  <div class="govuk-summary-list__row">
    <dt class="govuk-summary-list__key">Public account ID</dt>
    <dd class="govuk-summary-list__value">
      {{ accountDetails.publicAccountIdentifier }}
    </dd>
  </div>
  @if (isConfirmMode) {
    <ng-container *ngTemplateOutlet="allowancesSectionTpl" />
  }
  <div class="govuk-summary-list__row">
    <dt class="govuk-summary-list__key">Opened on</dt>
    <dd class="govuk-summary-list__value">
      {{ accountDetails.openingDate | gdsDateTime }}
    </dd>
  </div>
  <div class="govuk-summary-list__row" *ngIf="accountDetails.closingDate">
    <dt class="govuk-summary-list__key">Closed on</dt>
    <dd class="govuk-summary-list__value">
      {{ accountDetails.closingDate | gdsDateTime }}
    </dd>
  </div>
  <div class="govuk-summary-list__row" *ngIf="accountDetails.closureReason">
    <dt class="govuk-summary-list__key">Reason for closing the account</dt>
    <dd class="govuk-summary-list__value">
      {{ accountDetails.closureReason }}
    </dd>
  </div>
</dl>
<ng-container *ngIf="showSalesContactDetails">
  <dl
    class="govuk-summary-list govuk-summary-list--no-border govuk-!-margin-bottom-0"
  >
    <div class="govuk-summary-list__row">
      <dt class="govuk-summary-list__key">
        <span class="govuk-heading-m"
          >Contact details for selling UK allowances</span
        >
        <p class="govuk-body">
          These optional fields are intended to help potential buyers of UK
          Allowances (UKAs) to contact the most appropriate businesses to meet
          their needs.
        </p>
        <p class="govuk-body">
          These details will be displayed in the relevant public Registry
          reports.
        </p>
      </dt>
    </div>
  </dl>

  <dl
    class="govuk-summary-list govuk-summary-list--no-border govuk-!-margin-bottom-9"
  >
    <ng-container *ngTemplateOutlet="allowancesSectionTpl" />
  </dl>
</ng-container>

<ng-container *ngIf="accountType | isBillable">
  <app-billing-details-view
    *ngIf="accountDetails"
    [accountDetails]="accountDetails"
    [accountType]="accountType"
    [countries]="countries"
    [isConfirmMode]="isConfirmMode"
    [isAdmin]="isAdmin"
  />
</ng-container>

<ng-template #allowancesSectionTpl>
  <div class="govuk-summary-list__row">
    <dt class="govuk-summary-list__key">Do you want to sell UK Allowances?</dt>
    <dd class="govuk-summary-list__value">
      {{ accountDetails.sellingAllowances ? 'Yes' : 'No' }}
    </dd>
  </div>

  @if (accountDetails.sellingAllowances) {
    @if (accountDetails.salesContactDetails?.emailAddress?.emailAddress) {
      <div class="govuk-summary-list__row">
        <dt class="govuk-summary-list__key">
          UK Allowances sales contact email
        </dt>
        <dd class="govuk-summary-list__value">
          {{ accountDetails.salesContactDetails?.emailAddress?.emailAddress }}
        </dd>
      </div>
    }
    @if (accountDetails.salesContactDetails?.phoneNumber) {
      <div class="govuk-summary-list__row">
        <dt class="govuk-summary-list__key">
          UK Allowances sales contact phone
        </dt>
        <dd class="govuk-summary-list__value">
          <app-shared-phone-number
            [countryCode]="
              accountDetails.salesContactDetails?.phoneNumberCountryCode
            "
            [phoneNumber]="accountDetails.salesContactDetails?.phoneNumber"
          />
        </dd>
      </div>
    }
    <div class="govuk-summary-list__row">
      <dt class="govuk-summary-list__key">UK Allowances sales volumes</dt>
      <dd class="govuk-summary-list__value">
        @if (accountDetails.salesContactDetails?.uka1To99) {
          <div>1-99 UKAs</div>
        }
        @if (accountDetails.salesContactDetails?.uka100To999) {
          <div>100-999 UKAs</div>
        }
        @if (accountDetails.salesContactDetails?.uka1000Plus) {
          <div>1000+ UKAs</div>
        }
      </dd>
    </div>
  }
</ng-template>
