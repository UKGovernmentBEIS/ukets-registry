<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">
    <h1 class="govuk-heading-xl">Check the update, sign and apply</h1>
    <dl class="govuk-summary-list">
      <div class="govuk-summary-list__row">
        <dt class="govuk-summary-list__key govuk-body-l">Updates</dt>
        <dd class="govuk-summary-list__actions">
          <a
            [routerLink]="[]"
            (click)="onChangeClick()"
            (keypress)="onChangeClick()"
          >
            Change<span class="govuk-visually-hidden"> type of update</span>
          </a>
        </dd>
      </div>
    </dl>
  </div>
</div>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">
    <table class="govuk-table" aria-describedby="Allocation status">
      <caption class="govuk-table__caption">
        Allocation status
      </caption>
      <thead class="govuk-table__head">
        <tr class="govuk-table__row">
          <th scope="col" class="govuk-table__header">Year</th>
          <th scope="col" class="govuk-table__header">Withhold status</th>
        </tr>
      </thead>
      <tbody class="govuk-table__body">
        <ng-container
          *ngIf="updateRequestSnapshot && updateRequestSnapshot.changedStatus"
        >
          <tr
            class="govuk-table__row"
            *ngFor="
              let status of updateRequestSnapshot.changedStatus | keyvalue
            "
          >
            <td class="govuk-table__cell">
              {{ status.key }}
            </td>
            <td class="govuk-table__cell">
              <div class="allocation-status">
                {{ allocationStatusLabels[status.value]?.label }}
              </div>
            </td>
          </tr>
        </ng-container>
      </tbody>
    </table>
  </div>
</div>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">
    <dl class="govuk-summary-list govuk-summary-list--no-border">
      <div class="govuk-summary-list__row">
        <dt class="govuk-summary-list__key">
          Justification for changing the withhold status
        </dt>
        <dd class="govuk-summary-list__value">
          {{ updateRequest ? updateRequestSnapshot.justification : '' }}
        </dd>
      </div>
    </dl>
  </div>
</div>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">
    <button
      class="govuk-button"
      data-module="govuk-button"
      (debounceClick)="onApplyButtonClicked()"
      appDebounceClick
      id="submit"
    >
      Submit request
    </button>
  </div>
</div>
